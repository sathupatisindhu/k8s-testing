
name: Checkbox Workflow
'on':
  workflow_dispatch:
    inputs:
      environments:
        description: Select environment
        required: true
        default: dev
        type: choice
        options:
          - dev
          - qa
          - prod
      checkbox_1:
        description: Terraform Nodes
        required: true
        default: 'false'
      checkbox_2:
        description: Kops Installation
        required: false
        default: 'false'
      checkbox_3:
        description: EFK Installation
        required: false
        default: 'false'
      checkbox_4:
        description: Monitoring Installation
        required: false
        default: 'false'
jobs:
  run_workflow:
    runs-on: ubuntu-latest
    env:
      AWS_ACCESS_KEY_ID: '${{ secrets.AWS_ACCESS_KEY_ID }}'
      AWS_SECRET_ACCESS_KEY: '${{ secrets.AWS_SECRET_ACCESS_KEY }}'
    steps:
      - name: Check out the repository
        uses: actions/checkout@v2
      - name: Set up Terraform
        uses: hashicorp/setup-terraform@v1
        with:
          terraform_version: 0.14.9
      - name: Run workflow based on checkboxes and run commands
       run: |
          if [ "${{ github.event.inputs.checkbox1 }}" == "true" ]; then
            echo "creating nodes"
            # Your commands for Checkbox 1 go here
            echo "Before ls -lrt"
            ls -lrt
            echo "Before cd terraform"
            cd terraform
            echo "Before cd dev"
            cd dev
            echo "Before ls"
            ls
            echo "Before terraform --version"
            terraform --version
            echo "Before terraform init"
            terraform init
            echo "Before terraform validate"
            terraform validate
            echo "Before terraform plan"
            terraform plan
            echo "Before terraform apply"
            terraform apply --auto-approve
          fi

          if [ "${{ github.event.inputs.checkbox2 }}" == "true" ]; then
            echo "installation for Kops"
            # Your command for Checkbox 2 goes here

          fi
          if [ "${{ github.event.inputs.checkbox3 }}" == "true" ]; then
            echo "installation for EFK"
            # Your command for Checkbox 3 goes here
          fi
          if [ "${{ github.event.inputs.checkbox4 }}" == "true" ]; then
            echo "installation for monitoring"
            # Your command for Checkbox 4 goes here
          fi 
